!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).wtfCategory=e()}(this,(function(){"use strict";var t=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return new Promise((function(r,o){if(t&&e)if(0!==t.length)for(var i=[],a=n-1,u=0,f=function n(f){u+=1;var c=e(t[f]);c.then?(c.then((function(t){i[f]=t})),c.catch((function(t){console.error(t),i[f]=null})),c.finally((function(){u-=1,a+=1,t.length>=a+1?n(a):u<=0&&r(i)}))):o("Error: function must return a promise")},c=t.length<n?t.length:n,l=0;l<c;l+=1)f(l);else r([]);else o("Error: missing required parameters to rate-limit function")}))},e={one:function(e,n){return t(e,n,1)},two:function(e,n){return t(e,n,2)},three:function(e,n){return t(e,n,3)},four:function(e,n){return t(e,n,4)},five:function(e,n){return t(e,n,5)},ten:function(e,n){return t(e,n,10)},fifteen:function(e,n){return t(e,n,15)}};e.serial=e.one,e.linear=e.one,e.crawl=e.three,e.walk=e.five,e.run=e.ten,e.sprint=e.fifteen;var n=e;const r={lang:"en",wiki:"wikipedia",domain:null,path:"w/api.php"};var o=function(t,e,n){var o;e=e||{},e=Object.assign({},r,e),"string"==typeof t?e.lang=t:(o=t)&&"[object Object]"===Object.prototype.toString.call(o)&&(e=Object.assign(e,t));let i=`https://${e.lang}.wikipedia.org/${e.path}?`;return e.domain&&(i=`https://${e.domain}/${e.path}?`),i+="format=json&action=query&generator=random&grnnamespace=14&prop=revisions&grnlimit=1&origin=*",n(i).then((t=>{try{let e=t.query.pages;return e[Object.keys(e)[0]].title}catch(t){throw t}})).catch((t=>(console.error(t),null)))};var i,a=(i=Object.freeze({__proto__:null,default:n}))&&i.default||i;return function(t){t.wtf.parseCategory=function(e,n,r){return function(t,e,n,r){return e?t.category(e,n).then((e=>{let n=function(t,e=5){let n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n}(e.pages.map((t=>t.title)));return a.three(n,(function(e){return t.fetch(e,r)})).then((t=>({docs:[].concat.apply([],t),categories:e.categories})))})):{docs:[],categories:[]}}(t.wtf,e,n,r)},t.wtf.randomCategory=function(e,n){return o(e,n,t.http)},t.wtf.fetchCategory=t.wtf.parseCategory}}));
